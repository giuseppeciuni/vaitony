{% extends 'users/base_users.html' %}
{% load static %}

{% block user_content %}
    {% if form.errors %}
        <div class="vaitony-alert vaitony-alert-error">
            <i class="bi bi-exclamation-triangle" style="margin-right: 0.5rem;"></i>
            <strong>Errori di validazione:</strong>
            {% for key, value in form.errors.items %}
                <br/>{{ key }}: {{ value.0 }}
            {% endfor %}
        </div>
    {% endif %}

    <div class="vaitony-auth-container">
        <div class="vaitony-auth-box" style="max-width: 480px;">
            <div class="vaitony-auth-card">
                <!-- Header con branding VAITony -->
                <div class="vaitony-auth-header">
                    <div class="vaitony-logo vaitony-ai-pulse">AI</div>
                    <h1 class="vaitony-brand vaitony-mb-sm">VAITony</h1>
                    <p class="vaitony-mb-xs" style="opacity: 0.9; font-size: 1rem;">Unisciti alla Rivoluzione AI</p>
                </div>

                <!-- Body del form -->
                <div class="vaitony-auth-body">
                    <div class="vaitony-page-header vaitony-mb-lg">
                        <h2 class="vaitony-text-center vaitony-mb-sm" style="color: var(--vaitony-dark); font-size: 1.5rem; font-weight: 600;">
                            Crea il tuo Account
                        </h2>
                        <p class="vaitony-text-center" style="color: var(--vaitony-gray-600); font-size: 0.95rem;">
                            Registrati per accedere agli strumenti AI professionali
                        </p>
                    </div>

                    <form action="{% url 'register' %}" method="post">
                        {% csrf_token %}

                        <div class="vaitony-form-group">
                            <label class="vaitony-form-label" for="registerUsername">
                                <i class="bi bi-person vaitony-mr-sm"></i>Username
                            </label>
                            <div class="vaitony-input-group">
                                <input
                                    id="registerUsername"
                                    type="text"
                                    class="vaitony-input"
                                    placeholder="Scegli un username unico"
                                    name="username"
                                    required
                                />
                                <i class="bi bi-person vaitony-input-icon"></i>
                            </div>
                        </div>

                        <div class="vaitony-form-group">
                            <label class="vaitony-form-label" for="registerEmail">
                                <i class="bi bi-envelope vaitony-mr-sm"></i>Email
                            </label>
                            <div class="vaitony-input-group">
                                <input
                                    id="registerEmail"
                                    type="email"
                                    class="vaitony-input"
                                    placeholder="Inserisci la tua email professionale"
                                    name="email"
                                    required
                                />
                                <i class="bi bi-envelope vaitony-input-icon"></i>
                            </div>
                        </div>

                        <div class="vaitony-form-group">
                            <label class="vaitony-form-label" for="registerPassword">
                                <i class="bi bi-lock-fill vaitony-mr-sm"></i>Password
                            </label>
                            <div class="vaitony-input-group">
                                <input
                                    id="registerPassword"
                                    type="password"
                                    class="vaitony-input"
                                    placeholder="Crea una password sicura"
                                    name="password1"
                                    required
                                />
                                <i class="bi bi-lock-fill vaitony-input-icon"></i>
                            </div>
                        </div>

                        <div class="vaitony-form-group">
                            <label class="vaitony-form-label" for="registerPasswordConfirm">
                                <i class="bi bi-shield-check vaitony-mr-sm"></i>Conferma Password
                            </label>
                            <div class="vaitony-input-group">
                                <input
                                    id="registerPasswordConfirm"
                                    type="password"
                                    class="vaitony-input"
                                    placeholder="Ripeti la password"
                                    name="password2"
                                    required
                                />
                                <i class="bi bi-shield-check vaitony-input-icon"></i>
                            </div>
                        </div>

                        <!-- Password Requirements -->
                        <div class="vaitony-alert vaitony-alert-info vaitony-mb-lg" style="font-size: 0.8rem;">
                            <i class="bi bi-info-circle" style="margin-right: 0.5rem;"></i>
                            <strong>Requisiti password:</strong>
                            <ul style="margin: 0.5rem 0 0 0; padding-left: 1.2rem;">
                                <li>Almeno 8 caratteri</li>
                                <li>Non deve essere simile all'email o username</li>
                                <li>Non può contenere solo numeri</li>
                            </ul>
                        </div>

                        <!-- Terms and Conditions -->
                        <div class="vaitony-form-group">
                            <div class="vaitony-flex vaitony-items-center">
                                <input
                                    class="form-check-input"
                                    type="checkbox"
                                    value=""
                                    id="agreeTerms"
                                    name="agreement_terms"
                                    required
                                    style="margin-right: 0.75rem;"
                                />
                                <label class="form-check-label" for="agreeTerms" style="font-size: 0.875rem; color: var(--vaitony-gray-600); line-height: 1.4;">
                                    Accetto i
                                    <a href="#" style="color: var(--vaitony-primary); text-decoration: none; font-weight: 500;">
                                        Termini di Servizio
                                    </a>
                                    e la
                                    <a href="#" style="color: var(--vaitony-primary); text-decoration: none; font-weight: 500;">
                                        Privacy Policy
                                    </a>
                                    di VAITony
                                </label>
                            </div>
                        </div>

                        <button type="submit" class="vaitony-btn vaitony-btn-gradient vaitony-w-full vaitony-mb-lg">
                            <i class="bi bi-rocket-takeoff" style="margin-right: 0.5rem;"></i>
                            Inizia con VAITony
                        </button>
                    </form>

                    <!-- Footer -->
                    <div class="vaitony-text-center" style="padding-top: 1.5rem; border-top: 1px solid var(--vaitony-gray-200);">
                        <p style="color: var(--vaitony-gray-600); font-size: 0.875rem; margin-bottom: 0;">
                            Hai già un account?
                            <a
                                href="{% url 'login' %}"
                                style="color: var(--vaitony-primary); text-decoration: none; font-weight: 600; margin-left: 0.25rem;"
                                onmouseover="this.style.color='var(--vaitony-primary-dark)'"
                                onmouseout="this.style.color='var(--vaitony-primary)'"
                            >
                                Accedi ora
                            </a>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Benefits Section -->
            <div class="vaitony-text-center vaitony-mt-lg">
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; max-width: 400px; margin: 0 auto;">
                    <div style="text-align: center;">
                        <i class="bi bi-robot" style="font-size: 1.5rem; color: var(--vaitony-primary); margin-bottom: 0.5rem;"></i>
                        <p style="font-size: 0.75rem; color: var(--vaitony-gray-600); margin: 0;">AI Avanzata</p>
                    </div>
                    <div style="text-align: center;">
                        <i class="bi bi-shield-check" style="font-size: 1.5rem; color: var(--vaitony-success); margin-bottom: 0.5rem;"></i>
                        <p style="font-size: 0.75rem; color: var(--vaitony-gray-600); margin: 0;">Sicuro</p>
                    </div>
                    <div style="text-align: center;">
                        <i class="bi bi-lightning-charge" style="font-size: 1.5rem; color: var(--vaitony-warning); margin-bottom: 0.5rem;"></i>
                        <p style="font-size: 0.75rem; color: var(--vaitony-gray-600); margin: 0;">Veloce</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}